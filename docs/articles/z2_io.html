<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2 - Input/output operations â€¢ Rvision</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="2 - Input/output operations">
<meta property="og:description" content="Rvision">
<meta property="og:image" content="https://swarm-lab.github.io/ROpenCVLite/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rvision</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.3.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/z1_install.html">1 - Installing Rvision</a>
    </li>
    <li>
      <a href="../articles/z2_io.html">2 - Input/output operations</a>
    </li>
    <li>
      <a href="../articles/z3_basic.html">3 - Basic operations</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/swarm-lab/Rvision/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>2 - Input/output operations</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/swarm-lab/Rvision/blob/master/vignettes/z2_io.Rmd"><code>vignettes/z2_io.Rmd</code></a></small>
      <div class="hidden name"><code>z2_io.Rmd</code></div>

    </div>

    
    
<p><strong>This page describes how to read and write videos and images with <a href="https://github.com/swarm-lab/Rvision"><code>Rvision</code></a>.</strong></p>
<hr>
<ul>
<li>
<a href="#reading">2.1 - Reading</a>
<ul>
<li><a href="#videos">2.1.1 - Videos</a></li>
<li><a href="#camera-streams">2.1.2 - Camera streams</a></li>
<li>
<a href="#images">2.1.3 - Images</a>
<ul>
<li><a href="#from-files">2.1.3.1 - From files</a></li>
<li><a href="#from-videos">2.1.3.2 - From videos</a></li>
<li><a href="#from-camera-streams">2.1.3.3 - From streams</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#writing">2.2 - Writing</a>
<ul>
<li><a href="#videos-1">2.2.1 - Videos</a></li>
<li><a href="#images-1">2.2.2 - Images</a></li>
</ul>
</li>
</ul>
<hr>
<div id="reading" class="section level2">
<h2 class="hasAnchor">
<a href="#reading" class="anchor"></a>2.1 - Reading</h2>
<div id="videos" class="section level3">
<h3 class="hasAnchor">
<a href="#videos" class="anchor"></a>2.1.1 - Videos</h3>
<p>You can create a <code>Video</code> object from a video file as follows:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="no">path_to_video</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"sample_vid"</span>, <span class="st">"Balloon.mp4"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"Rvision"</span>)
<span class="no">my_video</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/video.html">video</a></span>(<span class="kw">filename</span> <span class="kw">=</span> <span class="no">path_to_video</span>)</pre></body></html></div>
<p><code>Video</code> objects can be released from memory as follows:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="../reference/release.html">release</a></span>(<span class="no">my_video</span>)</pre></body></html></div>
<p>Note that <code>Video</code> objects are wrappers around <a href="http://opencv.org/"><code>OpenCV</code></a> <a href="https://docs.opencv.org/3.4.1/d8/dfe/classcv_1_1VideoCapture.html"><code>VideoCapture</code></a> objects. They will not persist between <a href="https://cran.r-project.org"><code>R</code></a> sessions.</p>
</div>
<div id="camera-streams" class="section level3">
<h3 class="hasAnchor">
<a href="#camera-streams" class="anchor"></a>2.1.2 - Camera streams</h3>
<p>You can create a <code>Stream</code> object from a camera stream as follows:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">my_stream</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/stream.html">stream</a></span>(<span class="kw">index</span> <span class="kw">=</span> <span class="fl">0</span>)</pre></body></html></div>
<p>The index argument takes an integer number corresponding to the position of the camera in the list of video capturing devices available on your computer. 0 corresponds to the default camera, which is usually the embedded webcam on most computers. Note that the order of the list of video capturing devices might change after each computer restart.</p>
<p><code>Stream</code> objects can be released from memory as follows:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="../reference/release.html">release</a></span>(<span class="no">my_stream</span>)</pre></body></html></div>
<p>Note that <code>Stream</code> objects are wrappers around <a href="http://opencv.org/"><code>OpenCV</code></a> <a href="https://docs.opencv.org/3.4.1/d8/dfe/classcv_1_1VideoCapture.html"><code>VideoCapture</code></a> objects. They will not persist between <a href="https://cran.r-project.org"><code>R</code></a> sessions.</p>
</div>
<div id="images" class="section level3">
<h3 class="hasAnchor">
<a href="#images" class="anchor"></a>2.1.3 - Images</h3>
<p>There are three ways to create <code>Image</code> objects: from files, from <code>Video</code> objects, and from <code>Stream</code> objects.</p>
<p>Note that <code>Image</code> objects are wrappers around <a href="http://opencv.org/"><code>OpenCV</code></a> <a href="https://docs.opencv.org/3.4.1/d3/d63/classcv_1_1Mat.html"><code>Mat</code></a> objects. They will not persist between <a href="https://cran.r-project.org"><code>R</code></a> sessions.</p>
<div id="from-files" class="section level4">
<h4 class="hasAnchor">
<a href="#from-files" class="anchor"></a>2.1.3.1 - From files</h4>
<p>You can create an <code>Image</code> object from an image file as follows:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">path_to_image</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"sample_img"</span>, <span class="st">"bunny.png"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"Rvision"</span>)
<span class="no">my_image</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/image.html">image</a></span>(<span class="kw">filename</span> <span class="kw">=</span> <span class="no">path_to_image</span>)</pre></body></html></div>
</div>
<div id="from-videos" class="section level4">
<h4 class="hasAnchor">
<a href="#from-videos" class="anchor"></a>2.1.3.2 - From videos</h4>
<p>You can create an <code>Image</code> object from the next available frame of a <code>Video</code> object as follows:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">my_image</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/readNext.html">readNext</a></span>(<span class="no">my_video</span>)</pre></body></html></div>
<p>You can create an <code>Image</code> object from any arbitrary frame of a <code>Video</code> object as follows (here frame number 100):</p>
</div>
<div id="from-camera-streams" class="section level4">
<h4 class="hasAnchor">
<a href="#from-camera-streams" class="anchor"></a>2.1.3.3 - From camera streams</h4>
<p>You can create an <code>Image</code> object from the next available frame of a <code>Stream</code> object as follows:</p>
<hr>
</div>
</div>
</div>
<div id="writing" class="section level2">
<h2 class="hasAnchor">
<a href="#writing" class="anchor"></a>2.2 - Writing</h2>
<div id="videos-1" class="section level3">
<h3 class="hasAnchor">
<a href="#videos-1" class="anchor"></a>2.2.1 - Videos</h3>
<p>Videos can be written to the disk using a <code>VideoWriter</code> object.</p>
<p>When creating a <code>VideoWriter</code> object, you need to specify the codec of the video, its framerate, its height and its width. For instance, we will here create a <code>VideoWriter</code> object that will save to a temporary <a href="https://en.wikipedia.org/wiki/MPEG-4_Part_14"><code>mp4</code></a> video file using the <a href="https://www.videolan.org/developers/x264.html"><code>x264</code></a> codec at 30fps.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">path_to_video</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span>(), <span class="st">".mp4"</span>)
<span class="no">my_writer</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/videoWriter.html">videoWriter</a></span>(<span class="no">path_to_video</span>, <span class="kw">fourcc</span> <span class="kw">=</span> <span class="st">"x264"</span>, <span class="kw">fps</span> <span class="kw">=</span> <span class="fl">30</span>, <span class="kw">height</span> <span class="kw">=</span> <span class="fl">720</span>, <span class="kw">width</span> <span class="kw">=</span> <span class="fl">1280</span>)</pre></body></html></div>
<p>Once a <code>VideoWriter</code> object has been created, you can write individual frames to it. For instance, we will here capture 30 frames from the default webcam and write them to the video file.</p>
<p><code>VideoWriter</code> objects can be released from memory as follows:</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="../reference/release.html">release</a></span>(<span class="no">my_writer</span>)</pre></body></html></div>
<p>Note that <code>VideoWriter</code> objects are wrappers around <a href="http://opencv.org/"><code>OpenCV</code></a> <a href="https://docs.opencv.org/3.4.1/dd/d9e/classcv_1_1VideoWriter.html"><code>VideoWriter</code></a> objects. They will not persist between <a href="https://cran.r-project.org"><code>R</code></a> sessions.</p>
</div>
<div id="images-1" class="section level3">
<h3 class="hasAnchor">
<a href="#images-1" class="anchor"></a>2.2.2 - Images</h3>
<p>Writing an image to a file is straightforward using the <code>write.Image</code> function.</p>
<p><a href="https://github.com/swarm-lab/Rvision"><code>Rvision</code></a> will guess the format of the image file from the file extension. For instance, we will here capture 1 frame from the default webcam and write it to a temporary png image file.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://www.theswarmlab.com">Simon Garnier</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '3a2946bbe34c635ad2e2aae74a83374b',
    indexName: 'swarm-lab-rvision',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
