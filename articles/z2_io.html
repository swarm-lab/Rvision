<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Rvision">
<title>2 - Input/output operations • Rvision</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="2 - Input/output operations">
<meta property="og:description" content="Rvision">
<meta property="og:image" content="https://swarm-lab.github.io/Rvision/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Rvision</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/z1_install.html">1 - Installing Rvision</a>
    <a class="dropdown-item" href="../articles/z2_io.html">2 - Input/output operations</a>
    <a class="dropdown-item" href="../articles/z3_basic.html">3 - Basic operations</a>
    <a class="dropdown-item" href="../articles/z4_inplace.html">4 - In-place, copy, and target operations</a>
    <a class="dropdown-item" href="../articles/z5_gpu.html">5 - GPU operations</a>
    <a class="dropdown-item" href="../articles/z6_queue.html">6 - Capture queues</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/swarm-lab/Rvision/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>2 - Input/output operations</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/swarm-lab/Rvision/blob/HEAD/vignettes/z2_io.Rmd" class="external-link"><code>vignettes/z2_io.Rmd</code></a></small>
      <div class="d-none name"><code>z2_io.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="creating-video-streams">2.1 - Creating video streams<a class="anchor" aria-label="anchor" href="#creating-video-streams"></a>
</h2>
<p><code>Video</code> stream objects are created from video files by
passing the path to a video file to the <code><a href="../reference/video.html">video()</a></code> function.
For instance:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Find the path to the Balloon.mp4 video provided with Rvision</span></span>
<span><span class="va">path_to_video</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"sample_vid"</span>, <span class="st">"Balloon.mp4"</span>, package <span class="op">=</span> <span class="st">"Rvision"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Open the video file stream</span></span>
<span><span class="va">my_video</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/video.html">video</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="va">path_to_video</span><span class="op">)</span></span></code></pre></div>
<p>Once a <code>Video</code> object is not required anymore, it can be
released from memory as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/release.html">release</a></span><span class="op">(</span><span class="va">my_video</span><span class="op">)</span></span></code></pre></div>
<p>Note that <code>Video</code> objects are wrappers around
<code>OpenCV</code>’s <a href="https://docs.opencv.org/4.6.0/d8/dfe/classcv_1_1VideoCapture.html" class="external-link"><code>VideoCapture</code></a>
pointers. They will not persist between <code>R</code> sessions.</p>
<hr>
</div>
<div class="section level2">
<h2 id="creating-camera-streams">2.2 - Creating camera streams<a class="anchor" aria-label="anchor" href="#creating-camera-streams"></a>
</h2>
<p>Camera <code>Stream</code> objects are created by starting a camera
stream (e.g. from a webcam) using the <code><a href="../reference/stream.html">stream()</a></code> function.
For instance:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Start the default camera stream</span></span>
<span><span class="va">my_stream</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stream.html">stream</a></span><span class="op">(</span>index <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<p>The index argument takes an integer number corresponding to the
position of the camera in the list of video capturing devices available
on your computer. 0 corresponds to the default camera, which is usually
the embedded webcam on most computers. Note that the order of the list
of video capturing devices might change after each computer restart, or
if cameras are connected/disconnected during a session.</p>
<p>Once a <code>Stream</code> object is not required anymore, it can be
released from memory as follows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/release.html">release</a></span><span class="op">(</span><span class="va">my_stream</span><span class="op">)</span></span></code></pre></div>
<p>Note that <code>Stream</code> objects are wrappers around
<code>OpenCV</code>’s <a href="https://docs.opencv.org/4.6.0/d8/dfe/classcv_1_1VideoCapture.html" class="external-link"><code>VideoCapture</code></a>
pointers. They will not persist between <code>R</code> sessions.</p>
<hr>
</div>
<div class="section level2">
<h2 id="creating-images">2.3 - Creating images<a class="anchor" aria-label="anchor" href="#creating-images"></a>
</h2>
<p>There are multiple ways to create <code>Image</code> objects: from
files, from <code>Video</code> objects, from <code>Stream</code>
objects, and from <code>R</code> arrays.</p>
<p>Note that <code>Image</code> objects are wrappers around
<code>OpenCV</code>’s <a href="https://docs.opencv.org/4.6.0/d3/d63/classcv_1_1Mat.html" class="external-link"><code>Mat</code></a>
and <a href="https://docs.opencv.org/4.6.0/d7/d45/classcv_1_1UMat.html" class="external-link"><code>UMat</code></a>
objects. They will not persist between <code>R</code> sessions.</p>
<div class="section level3">
<h3 id="images-from-files">2.3.1 - Images from files<a class="anchor" aria-label="anchor" href="#images-from-files"></a>
</h3>
<p><code>Image</code> objects are created from image files by passing
the path to an image file to the <code><a href="../reference/image.html">image()</a></code> function. For
instance:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Find the path to the balloon1.png image provided with Rvision</span></span>
<span><span class="va">path_to_image</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"sample_img"</span>, <span class="st">"balloon1.png"</span>, package <span class="op">=</span> <span class="st">"Rvision"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load the image in memory</span></span>
<span><span class="va">my_image</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/image.html">image</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="va">path_to_image</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="images-from-video-streams">2.3.2 - Images from video streams<a class="anchor" aria-label="anchor" href="#images-from-video-streams"></a>
</h3>
<p><code>Image</code> objects are created from video streams by
capturing frames from them with the <code><a href="../reference/readNext.html">readNext()</a></code> and
<code><a href="../reference/readFrame.html">readFrame()</a></code> functions. For instance:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Capture the next available frame from the my_video object created earlier</span></span>
<span><span class="va">my_image</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readNext.html">readNext</a></span><span class="op">(</span><span class="va">my_video</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Capture frame 100 from the my_video object created earlier</span></span>
<span><span class="va">my_image</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readFrame.html">readFrame</a></span><span class="op">(</span><span class="va">my_video</span>, <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="images-from-camera-streams">2.3.3 - Images from camera streams<a class="anchor" aria-label="anchor" href="#images-from-camera-streams"></a>
</h3>
<p><code>Image</code> objects are created from video streams by
capturing frames from them with the <code><a href="../reference/readNext.html">readNext()</a></code> function.
For instance:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Capture the next available frame from the my_stream object created earlier</span></span>
<span><span class="va">my_image</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readNext.html">readNext</a></span><span class="op">(</span><span class="va">my_stream</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="images-from-r-arrays-and-matrices">2.3.4 - Images from R arrays and matrices<a class="anchor" aria-label="anchor" href="#images-from-r-arrays-and-matrices"></a>
</h3>
<p><code>Image</code> objects are created from <code>R</code> arrays and
matrices by passing the array or matrix directly to the
<code><a href="../reference/image.html">image()</a></code> function. For instance:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a 100 x 100 x 3 random array</span></span>
<span><span class="va">my_array</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">30000</span><span class="op">)</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load the image in memory</span></span>
<span><span class="va">my_image</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/image.html">image</a></span><span class="op">(</span><span class="va">my_array</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="writing-video-streams-to-file">2.4 - Writing video streams to file<a class="anchor" aria-label="anchor" href="#writing-video-streams-to-file"></a>
</h2>
<p>Videos can be written to files using <code>VideoWriter</code>
objects. When creating a <code>VideoWriter</code> object, the
dimensions, frame rate, and codec of the final video file must be
specified. For instance:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a 1280x720 video file called file.mp4 on the desktop, using the x264</span></span>
<span><span class="co"># codec at 30 frames per second</span></span>
<span><span class="va">my_writer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/videoWriter.html">videoWriter</a></span><span class="op">(</span><span class="st">"~/Desktop/file.mp4"</span>, fourcc <span class="op">=</span> <span class="st">"x264"</span>, fps <span class="op">=</span> <span class="fl">30</span>, </span>
<span>                         height <span class="op">=</span> <span class="fl">720</span>, width <span class="op">=</span> <span class="fl">1280</span><span class="op">)</span></span></code></pre></div>
<p>Once a <code>VideoWriter</code> object has been created, individual
frames can be written to it sequentially. For instance:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Capture the next 30 frames from the my_stream camera stream created earlier </span></span>
<span><span class="co"># and write them to file.mp4</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/writeFrame.html">writeFrame</a></span><span class="op">(</span><span class="va">my_writer</span>, <span class="fu"><a href="../reference/readNext.html">readNext</a></span><span class="op">(</span><span class="va">my_stream</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Once all frames have been written to the <code>VideoWriter</code>
object, it can be closed and released from memory as follows:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/release.html">release</a></span><span class="op">(</span><span class="va">my_writer</span><span class="op">)</span></span></code></pre></div>
<p>Note that if you do not close and release the
<code>VideoWriter</code> object prior to exiting the <code>R</code>
session, you will not be able to play it with your system’s video
player.</p>
<p>Note that <code>VideoWriter</code> objects are wrappers around
<code>OpenCV</code>’s <a href="https://docs.opencv.org/4.6.0/dd/d9e/classcv_1_1VideoWriter.html" class="external-link"><code>VideoWriter</code></a>
pointers. They will not persist between <code>R</code> sessions.</p>
<hr>
</div>
<div class="section level2">
<h2 id="writing-images-to-file">2.4 - Writing images to file<a class="anchor" aria-label="anchor" href="#writing-images-to-file"></a>
</h2>
<p>Images can be written to files using the <code><a href="../reference/write.Image.html">write.Image()</a></code>
function. For instance:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Write the my_image object created earlier to a PNG file called file.png on the</span></span>
<span><span class="co"># desktop</span></span>
<span><span class="fu"><a href="../reference/write.Image.html">write.Image</a></span><span class="op">(</span><span class="va">my_image</span>, <span class="st">"~/Desktop/file.png"</span><span class="op">)</span></span></code></pre></div>
<p><code>Rvision</code> will guess the format of the image file from the
file extension. Most common file formats are supported.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.theswarmlab.com" class="external-link">Simon Garnier</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
